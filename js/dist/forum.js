module.exports=function(o){var t={};function e(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return o[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=o,e.c=t,e.d=function(o,t,r){e.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:r})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,t){if(1&t&&(o=e(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var n in o)e.d(r,n,function(t){return o[t]}.bind(null,n));return r},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},e.p="",e(e.s=11)}([function(o,t){o.exports=flarum.core.compat["forum/app"]},function(o,t){o.exports=flarum.core.compat["common/Model"]},,function(o,t){o.exports=flarum.core.compat["common/components/Button"]},function(o,t){o.exports=flarum.core.compat["common/models/User"]},function(o,t){o.exports=flarum.core.compat["common/helpers/username"]},function(o,t){o.exports=flarum.core.compat["common/extend"]},function(o,t){o.exports=flarum.core.compat["forum/utils/UserControls"]},function(o,t){o.exports=flarum.core.compat["common/components/Modal"]},function(o,t){o.exports=flarum.core.compat["common/utils/Stream"]},function(o,t){o.exports=flarum.core.compat["common/utils/withAttr"]},function(o,t,e){"use strict";e.r(t);var r=e(6),n=e(0),a=e.n(n),s=e(7),i=e.n(s),u=e(3),c=e.n(u),l=e(1),p=e.n(l),f=e(4),d=e.n(f);function h(o,t){return(h=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o})(o,t)}function b(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,h(o,t)}var y=e(8),v=e.n(y),x=e(5),_=e.n(x),g=e(9),F=e.n(g),O=e(10),j=e.n(O),M=function(o){function t(){return o.apply(this,arguments)||this}b(t,o);var e=t.prototype;return e.oninit=function(t){o.prototype.oninit.call(this,t),this.user=this.attrs.user,this.reason=F()(""),this.loading=!1,this.reasonEnabled=a.a.initializers.has("fof-moderator-notes"),this.reasonRequired=this.user.impersonateReasonRequired()},e.className=function(){return"ImpersonateModal Modal--medium"},e.title=function(){return a.a.translator.trans("fof-impersonate.forum.modal.title")},e.content=function(){return m("div",{className:"Modal-body"},m("div",null,m("p",null,a.a.translator.trans("fof-impersonate.forum.modal.label",{username:_()(this.user)}))),m("div",{className:"Form Form--centered"},this.reasonEnabled?m("div",{className:"Form-group"},m("textarea",{className:"FormControl",value:this.reason(),placeholder:this.reasonRequired?a.a.translator.trans("fof-impersonate.forum.modal.placeholder_required"):a.a.translator.trans("fof-impersonate.forum.modal.placeholder_optional"),oninput:j()("value",this.reason),rows:"4"})):"",m("div",{className:"Form-group"},c.a.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading},a.a.translator.trans("fof-impersonate.forum.modal.impersonate_username",{username:_()(this.user)})))))},e.onsubmit=function(o){o.preventDefault(),this.loading=!0,a.a.store.createRecord("impersonate").save({userId:this.user.id(),reason:this.reason()},{errorHandler:this.onerror.bind(this)}).then(this.attrs.callback).catch((function(){}))},e.onerror=function(t){422===t.status&&(t.alert.props.children=a.a.translator.trans("fof-impersonate.forum.modal.placeholder_required")),this.loading=!1,o.prototype.onerror.call(this,t)},t}(v.a),R=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=o.call.apply(o,[this].concat(r))||this).id=p.a.attribute("id"),t.reason=p.a.attribute("reason"),t}return b(t,o),t}(p.a);a.a.initializers.add("fof-impersonate",(function(){d.a.prototype.canFoFImpersonate=p.a.attribute("canFoFImpersonate"),d.a.prototype.impersonateReasonRequired=p.a.attribute("impersonateReasonRequired"),a.a.store.models.impersonate=R,Object(r.extend)(i.a,"moderationControls",(function(o,t){t.canFoFImpersonate()&&o.add("fof-impersonate-login",c.a.component({icon:"fas fa-id-card",onclick:function(){a.a.modal.show(M,{callback:function(){return window.location.reload()},user:t})}},a.a.translator.trans("fof-impersonate.forum.user_controls.impersonate_button")))}))}))}]);
//# sourceMappingURL=forum.js.map