module.exports=function(o){var e={};function t(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return o[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=o,t.c=e,t.d=function(o,e,r){t.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:r})},t.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},t.t=function(o,e){if(1&e&&(o=t(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var n in o)t.d(r,n,function(e){return o[e]}.bind(null,n));return r},t.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(e,"a",e),e},t.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},t.p="",t(t.s=10)}([function(o,e){o.exports=flarum.core.compat["common/app"]},function(o,e){o.exports=flarum.core.compat["common/Model"]},function(o,e){o.exports=flarum.core.compat["common/components/Button"]},function(o,e){o.exports=flarum.core.compat["common/models/User"]},function(o,e){o.exports=flarum.core.compat["common/helpers/username"]},function(o,e){o.exports=flarum.core.compat["common/extend"]},function(o,e){o.exports=flarum.core.compat["common/utils/UserControls"]},function(o,e){o.exports=flarum.core.compat["common/components/Modal"]},function(o,e){o.exports=flarum.core.compat["common/utils/Stream"]},function(o,e){o.exports=flarum.core.compat["common/utils/withAttr"]},function(o,e,t){"use strict";t.r(e);var r=t(5),n=t(0),a=t.n(n),i=t(6),s=t.n(i),u=t(2),c=t.n(u),l=t(1),p=t.n(l),f=t(3),d=t.n(f);function h(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e}var b=t(7),y=t.n(b),v=t(4),x=t.n(v),g=t(8),_=t.n(g),F=t(9),j=t.n(F),w=function(o){function e(){return o.apply(this,arguments)||this}h(e,o);var t=e.prototype;return t.oninit=function(e){o.prototype.oninit.call(this,e),this.user=this.attrs.user,this.reason=_()(""),this.loading=!1,this.reasonEnabled=app.initializers.has("fof-moderator-notes"),this.reasonRequired=this.user.impersonateReasonRequired()},t.className=function(){return"ImpersonateModal Modal--medium"},t.title=function(){return app.translator.trans("fof-impersonate.forum.modal.title")},t.content=function(){return m("div",{className:"Modal-body"},m("div",null,m("p",null,app.translator.trans("fof-impersonate.forum.modal.label",{username:x()(this.user)}))),m("div",{className:"Form Form--centered"},this.reasonEnabled?m("div",{className:"Form-group"},m("textarea",{className:"FormControl",value:this.reason(),placeholder:this.reasonRequired?app.translator.trans("fof-impersonate.forum.modal.placeholder_required"):app.translator.trans("fof-impersonate.forum.modal.placeholder_optional"),oninput:j()("value",this.reason),rows:"4"})):"",m("div",{className:"Form-group"},c.a.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading},app.translator.trans("fof-impersonate.forum.modal.impersonate_username",{username:x()(this.user)})))))},t.onsubmit=function(o){o.preventDefault(),this.loading=!0,app.store.createRecord("impersonate").save({userId:this.user.id(),reason:this.reason()},{errorHandler:this.onerror.bind(this)}).then(this.attrs.callback).catch((function(){}))},t.onerror=function(e){422===e.status&&(e.alert.props.children=app.translator.trans("fof-impersonate.forum.modal.placeholder_required")),this.loading=!1,o.prototype.onerror.call(this,e)},e}(y.a);function O(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function R(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var M=function(o){function e(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return R(O(e=o.call.apply(o,[this].concat(r))||this),"id",p.a.attribute("id")),R(O(e),"reason",p.a.attribute("reason")),e}return h(e,o),e}(p.a);a.a.initializers.add("fof-impersonate",(function(){d.a.prototype.canFoFImpersonate=p.a.attribute("canFoFImpersonate"),d.a.prototype.impersonateReasonRequired=p.a.attribute("impersonateReasonRequired"),a.a.store.models.impersonate=M,Object(r.extend)(s.a,"moderationControls",(function(o,e){e.canFoFImpersonate()&&o.add("fof-impersonate-login",c.a.component({icon:"fas fa-id-card",onclick:function(){a.a.modal.show(w,{callback:function(){return window.location.reload()},user:e})}},a.a.translator.trans("fof-impersonate.forum.user_controls.impersonate_button")))}))}))}]);
//# sourceMappingURL=forum.js.map